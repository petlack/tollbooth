<html><head><meta name=generator content="Hugo 0.110.0"><meta charset=utf-8><link rel=stylesheet href=./styles.css><title>Tollbooth</title></head><body><main class="container-lg px-3 my-5 markdown-body"><h1 id=tollbooth>Tollbooth</h1><p><a href=https://github.com/petlack/tollbooth/actions/workflows/run-tests.yml><img src=https://github.com/petlack/tollbooth/actions/workflows/run-tests.yml/badge.svg alt="Run tests"></a>
<a href=https://github.com/petlack/tollbooth/actions/workflows/github-code-scanning/codeql><img src=https://github.com/petlack/tollbooth/actions/workflows/github-code-scanning/codeql/badge.svg alt=CodeQL></a>
<a href=https://www.npmjs.com/package/tollbooth><img src=https://img.shields.io/npm/v/tollbooth.svg alt="npm version"></a>
<img src=https://raw.githubusercontent.com/petlack/tollbooth/gh-pages/badge-coverage.svg alt=coverage></p><p>Tollbooth is a small utility (10kB raw JS) for Node.js, Express & AWS Lambda that throttles and limits number of requests per client using Redis.</p><ul><li><a href=#install>Install</a></li><li><a href=#how-it-works>How it works</a></li><li><a href=#usage-with-express>Usage with Express</a></li><li><a href=#usage-with-aws-lambda>Usage with AWS Lambda</a></li><li><a href=#manual-usage>Manual usage</a></li><li><a href=#configuration-options>Configuration options</a></li><li><a href=#admin-helpers>Admin helpers</a></li><li><a href=#examples>Examples</a></li><li><a href=#benchmarks>Benchmarks</a></li><li><a href=#development>Development</a></li></ul><h2 id=install>Install</h2><pre tabindex=0><code>npm add tollbooth
</code></pre><h2 id=how-it-works>How it works</h2><ol><li>Checks how many requests does given token still have left.</li><li>If the token was not given limit (i.e. <a href=#admin-helpers>setClientsLimits</a> was not called), rejects the request with <strong>Unauthorized</strong>.</li><li>If the token does not have enough requests (i.e. limit == 0), rejects the request with <strong>LimitReached</strong>.</li><li>Checks how many requests did the token make recently.</li><li>If the token made more than X requests in the last N seconds (configurable), rejects the request with <strong>TooManyRequests</strong>.</li><li>Otherwise, accepts the request with <strong>Ok</strong>.</li></ol><h2 id=usage-with-express>Usage with Express</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>express</span> <span class=kr>from</span> <span class=s1>&#39;express&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Redis</span> <span class=kr>from</span> <span class=s1>&#39;ioredis&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Tollbooth</span> <span class=kr>from</span> <span class=s1>&#39;tollbooth/express&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>redis</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Redis</span><span class=p>(</span><span class=s1>&#39;redis://localhost:6379&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>Tollbooth</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>redis</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>routes</span><span class=o>:</span> <span class=p>[{</span> <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/foo&#39;</span><span class=p>,</span> <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;get&#39;</span> <span class=p>}],</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// setup the express app &amp; start the server
</span></span></span></code></pre></div><p>By default, the token will be read from <strong>x-api-key</strong> header. See <a href=#configuration-options>Configuration Options</a> for customisation.</p><p>To manage tokens and limits, you can use <a href=#admin-helpers>Admin helpers</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>setTokensLimits</span><span class=p>,</span> <span class=nx>getTokenLimit</span><span class=p>,</span> <span class=nx>removeTokens</span><span class=p>,</span> <span class=nx>UNLIMITED</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;tollbooth&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// set tokens limits
</span></span></span><span class=line><span class=cl><span class=c1>// e.g. post request to create new account, cron job refreshing limits monthly
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>await</span> <span class=nx>setTokensLimits</span><span class=p>(</span><span class=nx>redis</span><span class=p>,</span> <span class=p>[{</span> <span class=nx>token</span><span class=o>:</span> <span class=s1>&#39;my_token&#39;</span><span class=p>,</span> <span class=nx>limit</span>: <span class=kt>1_000</span> <span class=p>}]);</span>
</span></span><span class=line><span class=cl><span class=c1>// token with no limit
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>await</span> <span class=nx>setTokensLimits</span><span class=p>(</span><span class=nx>redis</span><span class=p>,</span> <span class=p>[{</span> <span class=nx>token</span><span class=o>:</span> <span class=s1>&#39;my_token&#39;</span><span class=p>,</span> <span class=nx>limit</span>: <span class=kt>UNLIMITED</span> <span class=p>}]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// get token limit
</span></span></span><span class=line><span class=cl><span class=c1>// e.g. in user dashboard
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>limit</span>: <span class=kt>number</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>getTokenLimit</span><span class=p>(</span><span class=nx>redis</span><span class=p>,</span> <span class=s1>&#39;my_token&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// remove tokens
</span></span></span><span class=line><span class=cl><span class=c1>// e.g. on account termination
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>await</span> <span class=nx>removeTokens</span><span class=p>(</span><span class=nx>redis</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;my_token&#39;</span><span class=p>]);</span>
</span></span></code></pre></div><h2 id=usage-with-aws-lambda>Usage with AWS Lambda</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Context</span><span class=p>,</span> <span class=nx>APIGatewayProxyCallback</span><span class=p>,</span> <span class=nx>APIGatewayEvent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;aws-lambda&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Redis</span> <span class=kr>from</span> <span class=s1>&#39;ioredis&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Tollbooth</span> <span class=kr>from</span> <span class=s1>&#39;tollbooth/lambda&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>redis</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Redis</span><span class=p>(</span><span class=s1>&#39;redis://localhost:6379&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>protect</span> <span class=o>=</span> <span class=nx>Tollbooth</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>redis</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>routes</span><span class=o>:</span> <span class=p>[{</span> <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;*&#39;</span><span class=p>,</span> <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;get&#39;</span> <span class=p>}],</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>handle</span><span class=p>(</span><span class=nx>_event</span>: <span class=kt>APIGatewayEvent</span><span class=p>,</span> <span class=nx>_context</span>: <span class=kt>Context</span><span class=p>,</span> <span class=nx>callback</span>: <span class=kt>APIGatewayProxyCallback</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>callback</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>statusCode</span>: <span class=kt>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>body</span>: <span class=kt>JSON.stringify</span><span class=p>({</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;ok&#39;</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>handler</span> <span class=o>=</span> <span class=nx>protect</span><span class=p>(</span><span class=nx>handle</span><span class=p>);</span>
</span></span></code></pre></div><p>By default, the token will be read from <strong>x-api-key</strong> header. See <a href=#configuration-options>Configuration Options</a> for options.</p><h2 id=manual-usage>Manual usage</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Tollbooth</span><span class=p>,</span> <span class=p>{</span> <span class=nx>TollboothCode</span><span class=p>,</span> <span class=nx>setTokensLimits</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;tollbooth&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Redis</span> <span class=kr>from</span> <span class=s1>&#39;ioredis&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>redis</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Redis</span><span class=p>(</span><span class=s1>&#39;redis://localhost:6379&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>protect</span> <span class=o>=</span> <span class=nx>Tollbooth</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>redis</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>routes</span><span class=o>:</span> <span class=p>[{</span> <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/foo&#39;</span><span class=p>,</span> <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;get&#39;</span> <span class=p>}],</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ... application logic
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>await</span> <span class=nx>setTokensLimits</span><span class=p>(</span><span class=nx>redis</span><span class=p>,</span> <span class=p>[{</span> <span class=nx>token</span><span class=o>:</span> <span class=s1>&#39;my_token&#39;</span><span class=p>,</span> <span class=nx>limit</span>: <span class=kt>5</span> <span class=p>}]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>success</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>protect</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/foo&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;get&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>token</span><span class=o>:</span> <span class=s1>&#39;my_token&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>assert</span><span class=p>(</span><span class=nx>success</span><span class=p>.</span><span class=nx>code</span> <span class=o>===</span> <span class=nx>TollboothCode</span><span class=p>.</span><span class=nx>Ok</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Result&#39;</span><span class=p>,</span> <span class=nx>success</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// ... application logic
</span></span></span></code></pre></div><h3 id=return-value>Return value</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// HTTP status code
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>statusCode</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Internal code
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>code</span>: <span class=kt>TollboothCode.TooManyRequests</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>    <span class=nx>TollboothCode</span><span class=p>.</span><span class=nx>Unauthorized</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>    <span class=nx>TollboothCode</span><span class=p>.</span><span class=nx>LimitReached</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>    <span class=nx>TollboothCode</span><span class=p>.</span><span class=nx>Ok</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>    <span class=nx>TollboothCode</span><span class=p>.</span><span class=nx>RedisError</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Human readable code
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;TooManyRequests&#39;</span> <span class=o>|</span> <span class=s1>&#39;Unauthorized&#39;</span> <span class=o>|</span> <span class=s1>&#39;LimitReached&#39;</span> <span class=o>|</span> <span class=s1>&#39;Ok&#39;</span> <span class=o>|</span> <span class=s1>&#39;RedisError&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=configuration-options>Configuration options</h2><ul><li><code>redis</code>: Redis instance, e.g. <code>ioredis</code></li><li><code>routes</code>: List of protected routes<ul><li><code>path</code>: Relative path, e.g. <code>/foo</code>, or <code>*</code> to protect all paths with given method.</li><li><code>method</code>: One of <code>get</code>, <code>head</code>, <code>post</code>, <code>put</code>, <code>patch</code>, <code>delete</code>, <code>options</code></li></ul></li><li><code>tokenHeaderName</code>: <em>(Only for Express and AWS Lambda)</em> Name of the header containing token. Default <code>x-api-key</code></li><li><code>errorHandler</code>: <em>(Only for Express and AWS Lambda)</em> Custom error handler function with signature <code>(res: express.Response | APIGatewayProxyCallback, error: tollbooth.TollboothError) => void</code></li><li><code>allowAnonymous</code>: <em>(Optional)</em> If set to <code>true</code>, allows access without token. Default: <code>false</code></li><li><code>debug</code>: <em>(Optional)</em> If set to <code>true</code>, will enable console logging. Default: <code>false</code></li><li><code>failOnExceptions</code>: <em>(Optional)</em> If set to <code>false</code>, will not propagate exceptions (e.g. redis connection error), therefore allowing access. Default: <code>true</code></li><li><code>throttleEnabled</code>: <em>(Optional)</em> If set to <code>false</code>, turns off throttling. Default: <code>true</code></li><li><code>throttleInterval</code>: <em>(Optional)</em> Duration of the throttle interval in seconds. For example, when <code>throttleInterval=2</code> and <code>throttleLimit=10</code>, it will allow max 10 requests per 2 seconds, or fail with 429 response. Default: <code>1</code></li><li><code>throttleLimit</code>: <em>(Optional)</em> Maximum number of requests executed during the throttle interval. Default: <code>10</code>.</li></ul><h2 id=admin-helpers>Admin helpers</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Redis</span> <span class=kr>from</span> <span class=s1>&#39;ioredis&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>getTokenLimit</span><span class=p>,</span> <span class=nx>removeTokens</span><span class=p>,</span> <span class=nx>setTokensLimits</span><span class=p>,</span> <span class=nx>UNLIMITED</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;tollbooth&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>redis</span> <span class=o>=</span> <span class=nx>Redis</span><span class=p>(</span><span class=s1>&#39;redis://localhost:6379&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ... application logic
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// set token1 with maximum of 1_000 requests
</span></span></span><span class=line><span class=cl><span class=c1>// set token2 with maximum of 1 request
</span></span></span><span class=line><span class=cl><span class=c1>// set token3 with unlimited requests
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>await</span> <span class=nx>setTokensLimits</span><span class=p>(</span><span class=nx>redis</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>token</span><span class=o>:</span> <span class=s1>&#39;token1&#39;</span><span class=p>,</span> <span class=nx>limit</span>: <span class=kt>1_000</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>token</span><span class=o>:</span> <span class=s1>&#39;token2&#39;</span><span class=p>,</span> <span class=nx>limit</span>: <span class=kt>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>token</span><span class=o>:</span> <span class=s1>&#39;token3&#39;</span><span class=p>,</span> <span class=nx>limit</span>: <span class=kt>UNLIMITED</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>currentLimit</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>getTokenLimit</span><span class=p>(</span><span class=nx>redis</span><span class=p>,</span> <span class=s1>&#39;token1&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>({</span> <span class=nx>currentLimit</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// { currentLimit: 1000 }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// removes token1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>await</span> <span class=nx>removeTokens</span><span class=p>(</span><span class=nx>redis</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;token1&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>newLimit</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>getTokenLimit</span><span class=p>(</span><span class=nx>redis</span><span class=p>,</span> <span class=s1>&#39;token1&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>({</span> <span class=nx>newLimit</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// { newLimit: 0 }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// deletes all keys saved in redis
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>await</span> <span class=nx>evict</span><span class=p>(</span><span class=nx>redis</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ... application logic
</span></span></span></code></pre></div><h2 id=examples>Examples</h2><p>See <a href=examples/>examples</a> folder.</p><ul><li><a href=examples/express-server.ts>Express server</a></li><li><a href=examples/aws-lambda-handler.ts>AWS Lambda handler</a></li><li><a href=examples/http-server.ts>HTTP server</a></li><li><a href=examples/manual.ts>Manual usage</a></li></ul><h2 id=benchmarks>Benchmarks</h2><p>Start redis on <code>localhost:6379</code> and run</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run benchmark
</span></span></code></pre></div><p>See <a href=benchmarks/>benchmarks</a> folder. Currently comparing with executing single redis call.
Results on EC2 t4g.small instance with redis running locally.</p><pre tabindex=0><code>incrByScalar x 13,199 ops/sec ±2.09% (83 runs sampled)
protect x 7,582 ops/sec ±1.48% (83 runs sampled)
incrByScalar x 62,546 calls took 5903 ms, made 62,547 redis calls
protect x 36,493 calls took 5963 ms, made 145,979 redis calls
total redis calls 208,526
</code></pre><h2 id=development>Development</h2><h3 id=build>Build</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run build
</span></span></code></pre></div><h3 id=run-tests>Run tests</h3><p>Start redis on <code>localhost:6379</code> and run</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm <span class=nb>test</span>
</span></span></code></pre></div></main></body></html>